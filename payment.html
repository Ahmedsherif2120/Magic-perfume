<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ูุงุฌูู ููุนุทูุฑ - ุตูุญุฉ ุงูุฏูุน</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-100 font-sans">

  <div class="max-w-md mx-auto bg-white shadow-lg rounded-xl mt-10 p-6 space-y-6">

    <!-- ุตูุฑุฉ ุงูููุชุฌ -->
    <div class="text-center">
      <img id="productImage" src="" alt="ุตูุฑุฉ ุงูููุชุฌ" class="rounded-xl mx-auto mb-4 w-60 h-60 object-cover" />
      <h2 id="productName" class="text-xl font-bold mt-2"></h2>
    </div>

    <!-- ุงููููุฉ ูุงูุณุนุฑ -->
    <div>
      <label for="quantity" class="block mb-1 font-semibold">ุงููููุฉ:</label>
      <input type="number" id="quantity" min="1" value="1" class="w-full border rounded-lg px-3 py-2 text-right" />
      <p class="mt-2 font-bold">ุงูุณุนุฑ ุงูุฅุฌูุงูู: <span id="totalPrice">0</span> ุฌููู</p>
    </div>

    <!-- ุจูุงูุงุช ุงูุนููู -->
    <div>
      <label class="block mb-1 font-semibold">ุงุณู ุงูุนููู:</label>
      <input type="text" id="customerName" class="w-full border rounded-lg px-3 py-2 text-right" />

      <label class="block mt-4 mb-1 font-semibold">ุฑูู ุงููุงุชู:</label>
      <input type="tel" id="customerPhone" class="w-full border rounded-lg px-3 py-2 text-right" />
    </div>

    <!-- ุชุนูููุงุช ุงูุฏูุน -->
    <div class="bg-purple-100 border border-purple-300 text-purple-800 rounded-lg p-4 text-sm leading-relaxed">
      <span>โ ุงุฎุชุฑ ุทุฑููุฉ ุงูุฏูุน: ููุฏุงููู ูุงุด ุฃู ุฅูุณุชุง ุจู.</span><br>
      <span>โก ุจุนุฏ ุงูุฏูุนุ ุฎุฐ ุณูุฑูู ุดูุช ููุฅูุตุงู.</span><br>
      <span>โข ุงุถุบุท ุนูู 'ุฅุฑุณุงู ุงูุฅูุตุงู ุนูู ูุงุชุณุงุจ' ูุณูุชู ุชูุฌููู ุชููุงุฆููุง.</span>
    </div>

    <!-- ุฒุฑ ุงุฎุชูุงุฑ ูุณููุฉ ุงูุฏูุน -->
    <div class="flex justify-center gap-4 my-4">
      <button id="vodafoneBtn" class="payment-method px-6 py-2 border rounded-lg text-white bg-gray-600 hover:bg-red-600 transition">
        ููุฏุงููู ูุงุด<br><span class="text-sm">01001234567</span>
      </button>
      <button id="instapayBtn" class="payment-method px-6 py-2 border rounded-lg text-white bg-gray-600 hover:bg-blue-600 transition">
        ุฅูุณุชุง ุจู<br><span class="text-sm">yourname@instapay</span>
      </button>
    </div>

    <!-- ุฒุฑ ุฅุฑุณุงู ุงูุฅูุตุงู -->
    <div id="whatsappSection" class="text-center hidden">
      <a id="whatsappLink" href="#" target="_blank" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition">
        ุฅุฑุณุงู ุฅูุตุงู ุงูุฏูุน ุนูู ูุงุชุณุงุจ
      </a>
    </div>
  </div>

  <!-- ุณูุฑูุจุช -->
  <script>
    const query = new URLSearchParams(window.location.search);
    const imgSrc = query.get("img");
    const unitPrice = parseInt(query.get("price")) || 0;

    const productImage = document.getElementById("productImage");
    const quantityInput = document.getElementById("quantity");
    const totalPriceElement = document.getElementById("totalPrice");
    const customerName = document.getElementById("customerName");
    const customerPhone = document.getElementById("customerPhone");
    const whatsappLink = document.getElementById("whatsappLink");
    const whatsappSection = document.getElementById("whatsappSection");

    const vodafoneBtn = document.getElementById("vodafoneBtn");
    const instapayBtn = document.getElementById("instapayBtn");
    const whatsappNumber = "01121395320";

    // ุนุฑุถ ุตูุฑุฉ ุงูููุชุฌ
    if (imgSrc) {
      productImage.src = decodeURIComponent(imgSrc);
    }

    // ุชุญุฏูุซ ุงูุณุนุฑ ุงูุฅุฌูุงูู ุนูุฏ ุชุบููุฑ ุงููููุฉ
    function updateTotalPrice() {
      const quantity = parseInt(quantityInput.value) || 1;
      totalPriceElement.textContent = quantity * unitPrice;
    }

    quantityInput.addEventListener("input", updateTotalPrice);
    updateTotalPrice();

    function updateButtons(activeBtn, inactiveBtn, method) {
      activeBtn.classList.add("bg-" + (method === "vodafone" ? "red" : "blue") + "-600");
      inactiveBtn.classList.remove("bg-red-600", "bg-blue-600");

      const name = encodeURIComponent(customerName.value || "ุงูุนููู");
      const phone = encodeURIComponent(customerPhone.value || "ุจุฏูู ุฑูู");
      const quantity = parseInt(quantityInput.value) || 1;
      const total = quantity * unitPrice;

      const message = `โ ุทูุจ ุฌุฏูุฏ ูู ${name}\n๐ ุฑูู ุงููุงุชู: ${phone}\n๐ณ ุทุฑููุฉ ุงูุฏูุน: ${method === "vodafone" ? "ููุฏุงููู ูุงุด" : "ุฅูุณุชุง ุจู"}\n๐ฆ ุงููููุฉ: ${quantity}\n๐ฐ ุงูุณุนุฑ ุงูุฅุฌูุงูู: ${total} ุฌููู\n\nูู ูุถูู ุฃุฑุณู ุงูุฅูุตุงู ููุง.`;

      whatsappLink.href = `https://wa.me/2${whatsappNumber}?text=${encodeURIComponent(message)}`;
      whatsappSection.classList.remove("hidden");
    }

    vodafoneBtn.addEventListener("click", () => {
      updateButtons(vodafoneBtn, instapayBtn, "vodafone");
    });

    instapayBtn.addEventListener("click", () => {
      updateButtons(instapayBtn, vodafoneBtn, "instapay");
    });
  </script>
</body>
</html>
